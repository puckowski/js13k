class e{static create(){let e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}static perspective(e,t,o,n,r){let i=1/Math.tan(t/2),a=1/(n-r);return e[0]=i/o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(r+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*r*n*a,e[15]=0,e}static translate(e,t,o){let n=o[0],r=o[1],i=o[2];return t===e?(e[12]=t[0]*n+t[4]*r+t[8]*i+t[12],e[13]=t[1]*n+t[5]*r+t[9]*i+t[13],e[14]=t[2]*n+t[6]*r+t[10]*i+t[14],e[15]=t[3]*n+t[7]*r+t[11]*i+t[15]):(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[0]*n+t[4]*r+t[8]*i+t[12],e[13]=t[1]*n+t[5]*r+t[9]*i+t[13],e[14]=t[2]*n+t[6]*r+t[10]*i+t[14],e[15]=t[3]*n+t[7]*r+t[11]*i+t[15]),e}}class t{constructor(e,t){this.width=e,this.height=t,this.data=new Uint8Array(e*t*4)}drawRectangle(e,t,o,n,r,i,a,c){for(let s=t;s<t+n;s++)for(let t=e;t<e+o;t++){let e=4*(s*this.width+t);this.data[e]=r,this.data[e+1]=i,this.data[e+2]=a,this.data[e+3]=c}return this}addRandomNoise(e,t,o,n=!1){const r=e=>{const t=Math.floor(.2*e),o=Math.max(0,e-t),n=Math.min(255,e+t);return Math.floor(Math.random()*(n-o+1))+o};for(let i=0;i<this.height;i+=8)for(let a=0;a<this.width;a+=8){const c=r(e),s=r(t),u=r(o);for(let e=0;e<8;e++)for(let t=0;t<8;t++){if(i+e>=this.height||a+t>=this.width)continue;let o=4*((i+e)*this.width+(a+t));n?(this.data[o]=c,this.data[o+1]=s,this.data[o+2]=u):(this.data[o]=Math.floor(.5*this.data[o]+.5*c),this.data[o+1]=Math.floor(.5*this.data[o+1]+.5*s),this.data[o+2]=Math.floor(.5*this.data[o+2]+.5*u)),this.data[o+3]=255}}return this}copyRows(e,t){const o=Math.floor(.25*this.height);e+=o;for(let n=0;n<o;n++)for(let r=0;r<this.width;r++){const i=4*((e-o+n)*this.width+r),a=4*((t+n)*this.width+r);this.data[a]=this.data[i],this.data[a+1]=this.data[i+1],this.data[a+2]=this.data[i+2],this.data[a+3]=this.data[i+3]}return this}getData(){return this.data}}const o={1:[[1,1,1,1,1,1,1,1,1,1],[1,2,0,0,0,0,0,0,0,1],[1,0,1,1,1,1,1,1,0,1],[1,3,1,0,0,0,0,1,0,1],[1,0,1,0,1,1,0,1,0,1],[1,0,1,0,0,1,0,1,0,1],[1,0,1,1,0,1,0,1,0,1],[1,0,0,0,0,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1]],2:[[1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,0,0,0,2,1],[1,0,1,1,1,1,1,1,0,1],[1,0,1,0,0,0,0,1,3,1],[1,0,1,0,1,1,0,1,0,1],[1,0,1,0,0,1,0,1,0,1],[1,0,1,1,0,1,0,1,0,1],[1,0,0,0,0,1,0,1,0,1],[1,0,0,0,0,0,0,0,0,1],[1,1,1,1,1,1,1,1,1,1]]};let n=!1,r=1,i=3,a=0,c=o[1];const s=new Map;s.set(1,2),s.set(2,1);let u,d=1,l=8,f=1,h=1;const R=document.getElementById("glCanvas"),g=R.getContext("webgl");g||(alert("WebGL not supported, falling back on experimental-webgl"),g=R.getContext("experimental-webgl")),g||alert("Your browser does not support WebGL"),g.enable(g.BLEND),g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA);const m=new t(256,256);m.drawRectangle(0,0,86,32,63,62,62,255).drawRectangle(86,0,86,32,92,91,90,255).drawRectangle(172,0,86,32,63,62,62,255).drawRectangle(0,32,64,32,112,111,110,255).drawRectangle(64,32,64,32,80,79,79,255).drawRectangle(128,32,64,32,112,111,110,255).drawRectangle(192,32,64,32,80,79,79,255).copyRows(0,64).copyRows(32,96).copyRows(0,128).copyRows(32,160).copyRows(0,192).copyRows(32,224).addRandomNoise(85,84,84);let p=N(g,256,256,m);const y=new t(256,256);y.drawRectangle(0,0,128,32,98,74,58,255).drawRectangle(128,0,128,32,113,89,73,255).drawRectangle(0,32,128,32,113,64,48,255).drawRectangle(128,32,128,32,108,84,68,255).copyRows(0,64).copyRows(32,96).copyRows(0,128).copyRows(32,160).copyRows(0,192).copyRows(32,224).addRandomNoise(99,75,59);const E=new t(256,256);E.drawRectangle(0,0,86,32,146,135,121,255).drawRectangle(86,0,86,32,131,121,108,255).drawRectangle(172,0,86,32,146,135,121,255).drawRectangle(0,32,64,32,116,108,96,255).drawRectangle(64,32,64,32,102,94,84,255).drawRectangle(128,32,64,32,116,108,96,255).drawRectangle(192,32,64,32,102,94,84,255).copyRows(0,64).copyRows(32,96).copyRows(0,128).copyRows(32,160).copyRows(0,192).copyRows(32,224).addRandomNoise(90,48,16);const w=N(g,256,256,E),A=new t(256,256);A.addRandomNoise(0,105,62);const x=N(g,256,256,A),T=new t(256,256);T.drawRectangle(0,0,256,256,255,255,255,0).drawRectangle(112,32,16,16,0,0,0,255).drawRectangle(118,48,4,96,0,0,0,255).drawRectangle(76,76,88,4,0,0,0,255).drawRectangle(114,144,4,96,0,0,0,255).drawRectangle(122,144,4,96,0,0,0,255).drawRectangle(122,144,4,96,0,0,0,255);const b=N(g,256,256,T),F=new Map;function _(e,t,o){const n=function(e,t){return{positions:[e,0,t,e+1,0,t,e,1,t,e+1,1,t],textureCoordinates:[0,1,1,1,0,0,1,0],indices:[0,1,2,2,1,3]}}(t,o),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n.positions),e.STATIC_DRAW);const i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n.textureCoordinates),e.STATIC_DRAW);const a=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,a),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(n.indices),e.STATIC_DRAW),{position:r,textureCoord:i,indices:a,vertexCount:n.indices.length}}function C(e,t,o,n){const r=e.getUniformLocation(t.program,"uColor");e.bindBuffer(e.ARRAY_BUFFER,o.position),e.vertexAttribPointer(t.attribLocations.vertexPosition,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.attribLocations.vertexPosition),e.bindBuffer(e.ARRAY_BUFFER,o.textureCoord),e.vertexAttribPointer(t.attribLocations.textureCoord,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.attribLocations.textureCoord),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o.indices),e.uniformMatrix4fv(t.uniformLocations.modelViewMatrix,!1,n),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,b),e.uniform1i(t.uniformLocations.uSampler,0),e.uniform4f(r,0,0,0,0),e.drawElements(e.TRIANGLES,o.vertexCount,e.UNSIGNED_SHORT,0)}F.set(1,w),F.set(2,x);const v=function(e,t,o){const n=[],r=[];for(let r=0;r<=t;r++){const i=r*Math.PI/t,a=Math.sin(i),c=Math.cos(i);for(let t=0;t<=o;t++){const r=2*t*Math.PI/o,i=Math.sin(r),s=Math.cos(r)*a,u=c,d=i*a;n.push(e*s,e*u,e*d)}}for(let e=0;e<t;e++)for(let t=0;t<o;t++){const n=e*(o+1)+t,i=n+o+1;r.push(n,i,n+1,i,i+1,n+1)}return{positions:n,indices:r}}(.25,30,30),L=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,L),g.bufferData(g.ARRAY_BUFFER,new Float32Array(v.positions),g.STATIC_DRAW);const U=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,U),g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array(v.indices),g.STATIC_DRAW);const B={position:L,indices:U,vertexCount:v.indices.length};function M(e,t,o){const n=e.createShader(t);return e.shaderSource(n,o),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(n)),e.deleteShader(n),null)}const P=function(e,t,o){const n=M(e,e.VERTEX_SHADER,t),r=M(e,e.FRAGMENT_SHADER,o),i=e.createProgram();return e.attachShader(i,n),e.attachShader(i,r),e.linkProgram(i),e.getProgramParameter(i,e.LINK_STATUS)?i:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(i)),null)}(g,"\nattribute vec4 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvarying highp vec2 vTextureCoord;\nvarying highp vec3 vFragPos;\n\nvoid main(void) {\ngl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\nvTextureCoord = aTextureCoord;\nvFragPos = (uModelViewMatrix * aVertexPosition).xyz;\n}\n","\nvarying highp vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform highp vec3 fogColor;\nuniform highp float fogNear;\nuniform highp float fogFar;\nvarying highp vec3 vFragPos;\nuniform highp vec4 uColor;\n\nvoid main(void) {\n    if (uColor.a != 0.0) {\n        gl_FragColor = uColor;\n    } else {\n        highp vec4 textureColor = texture2D(uSampler, vTextureCoord);\n        highp float fogDistance = length(vFragPos);\n        highp float fogFactor = smoothstep(fogNear, fogFar, fogDistance);\n        gl_FragColor = mix(textureColor, vec4(fogColor, 1.0), fogFactor);\n        gl_FragColor.a *= textureColor.a;  // Apply texture alpha\n    }\n}\n"),S={program:P,attribLocations:{vertexPosition:g.getAttribLocation(P,"aVertexPosition"),textureCoord:g.getAttribLocation(P,"aTextureCoord")},uniformLocations:{projectionMatrix:g.getUniformLocation(P,"uProjectionMatrix"),modelViewMatrix:g.getUniformLocation(P,"uModelViewMatrix"),uSampler:g.getUniformLocation(P,"uSampler"),fogColor:g.getUniformLocation(P,"fogColor"),fogNear:g.getUniformLocation(P,"fogNear"),fogFar:g.getUniformLocation(P,"fogFar"),uColor:g.getUniformLocation(P,"uColor")}};let k=D(g);function D(e){const t=[],o=[],n=[],r=[],i=[],a=[];let s=0;for(let e=0;e<c.length;e++)for(let r=0;r<c[e].length;r++)1===c[e][r]&&(t.push(r,0,e,r+1,0,e,r,1,e,r+1,1,e),o.push(0,0,1,0,0,1,1,1),n.push(s,s+1,s+2,s+2,s+1,s+3),s+=4,t.push(r,0,e+1,r+1,0,e+1,r,1,e+1,r+1,1,e+1),o.push(0,0,1,0,0,1,1,1),n.push(s,s+1,s+2,s+2,s+1,s+3),s+=4,t.push(r+1,0,e,r+1,0,e+1,r+1,1,e,r+1,1,e+1),o.push(0,0,1,0,0,1,1,1),n.push(s,s+1,s+2,s+2,s+1,s+3),s+=4,t.push(r,0,e,r,0,e+1,r,1,e,r,1,e+1),o.push(0,0,1,0,0,1,1,1),n.push(s,s+1,s+2,s+2,s+1,s+3),s+=4);for(let e=0;e<c.length;e++)for(let t=0;t<c[e].length;t++)r.push(t,0,e,t+1,0,e,t,0,e+1,t+1,0,e+1),i.push(0,0,1,0,0,1,1,1),a.push(s,s+1,s+2,s+2,s+1,s+3),s+=4;const u=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,u),e.bufferData(e.ARRAY_BUFFER,new Float32Array(t.concat(r)),e.STATIC_DRAW);const d=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,d),e.bufferData(e.ARRAY_BUFFER,new Float32Array(o.concat(i)),e.STATIC_DRAW);const l=e.createBuffer();return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(n.concat(a)),e.STATIC_DRAW),{position:u,textureCoord:d,indices:l,vertexCount:n.length+a.length,wallVertexCount:n.length,floorVertexCount:a.length}}function N(e,t,o,n){const r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r);const i=n.getData();return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,o,0,e.RGBA,e.UNSIGNED_BYTE,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),r}function I(t,o,n,r,i,a){t.clearColor(.53,.81,.98,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT);const s=45*Math.PI/180,R=t.canvas.clientWidth/t.canvas.clientHeight,g=e.create();e.perspective(g,s,R,.1,100);const m=e.create();e.translate(m,m,[-d-.5,-1,-l]);{const e=3,r=t.FLOAT,i=!1,a=0,c=0;t.bindBuffer(t.ARRAY_BUFFER,n.position),t.vertexAttribPointer(o.attribLocations.vertexPosition,e,r,i,a,c),t.enableVertexAttribArray(o.attribLocations.vertexPosition)}{const e=2,r=t.FLOAT,i=!1,a=0,c=0;t.bindBuffer(t.ARRAY_BUFFER,n.textureCoord),t.vertexAttribPointer(o.attribLocations.textureCoord,e,r,i,a,c),t.enableVertexAttribArray(o.attribLocations.textureCoord)}t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.indices),t.useProgram(o.program),t.uniformMatrix4fv(o.uniformLocations.projectionMatrix,!1,g),t.uniformMatrix4fv(o.uniformLocations.modelViewMatrix,!1,m),t.uniform3f(o.uniformLocations.fogColor,.53,.81,.98),t.uniform1f(o.uniformLocations.fogNear,1),t.uniform1f(o.uniformLocations.fogFar,10),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r),t.uniform1i(o.uniformLocations.uSampler,0),t.uniform4f(o.uniformLocations.uColor,0,0,0,0);{const e=n.wallVertexCount,o=t.UNSIGNED_SHORT,r=0;t.drawElements(t.TRIANGLES,e,o,r)}t.bindTexture(t.TEXTURE_2D,i);{const e=n.floorVertexCount,o=t.UNSIGNED_SHORT,r=2*n.wallVertexCount;t.drawElements(t.TRIANGLES,e,o,r)}const p=e.create();u=function(e,t,o,n,r=-.25){return[-e+o,r,-t+n+.5]}(d,l,f,h),e.translate(p,p,u),function(e,t,o,n,r){const i=e.getUniformLocation(t.program,"uColor");e.bindBuffer(e.ARRAY_BUFFER,o.position),e.vertexAttribPointer(t.attribLocations.vertexPosition,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(t.attribLocations.vertexPosition),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,o.indices),e.uniformMatrix4fv(t.uniformLocations.modelViewMatrix,!1,n),e.uniform4fv(i,r),e.drawElements(e.TRIANGLES,o.vertexCount,e.UNSIGNED_SHORT,0)}(t,o,a,p,[0,1,0,1]);for(let e=0;e<c.length;e++)for(let n=0;n<c[e].length;n++)if(3===c[e][n]){C(t,o,_(t,n,e),m)}}function Y(e){switch(r){case 1:p=N(g,256,256,m);break;case 2:p=N(g,256,256,y)}c=e,k=D(g);const{x:t,y:o}=function(){for(let e=0;e<c.length;e++)for(let t=0;t<c[e].length;t++)if(2===c[e][t])return{x:t,y:e}}();f=t,h=o,I(g,S,k,p,F.get(r),B),I(g,S,k,p,F.get(r),B)}document.addEventListener("keydown",(e=>{if(i<=0)return;n||(n=!0,X());const t=Math.floor(2*Math.random())+1;if("ArrowUp"!==e.key||0!==c[l-1][d]&&2!==c[l-1][d])if("ArrowDown"!==e.key||0!==c[l+1][d]&&2!==c[l+1][d])if("ArrowLeft"!==e.key||0!==c[l][d-1]&&2!==c[l][d-1])if("ArrowRight"!==e.key||0!==c[l][d+1]&&2!==c[l][d+1]){if(3===c[l-1][d])if("a"===e.key)switch(t){case 1:c[l-1][d]=0,a++,O("win","Scissors");break;case 2:i--,O("defeat","Paper")}else if("s"===e.key)switch(t){case 1:c[l-1][d]=0,a++,O("win","Rock");break;case 2:i--,O("defeat","Scissors")}else if("d"===e.key)switch(t){case 1:c[l-1][d]=0,a++,O("win","Paper");break;case 2:i--,O("defeat","Rock")}}else d++;else d--;else l++;else l--;if(2===c[l][d]){const e=s.get(r);r=e,Y(o[String(r)])}else I(g,S,k,p,F.get(r),B)}));let q,z,V=!1;function G(){const e=document.getElementById("status");i<=0?(n=!1,e.innerText="You lost!"):e.innerText=2===a?"You won!":"Lives: "+i;const t=document.createElement("button");t.innerText="Manual",t.style="color:white;background-color:#2222;margin-left:1rem;",t.onclick=()=>{const e=document.getElementById("overlay");e.hidden?e.removeAttribute("hidden"):e.setAttribute("hidden",!0)},e.appendChild(t);const o=document.createElement("button");o.innerText="Left",o.style="color:white;background-color:#2222;margin-left:1rem;",o.onclick=()=>{let e=new KeyboardEvent("keydown",{key:"ArrowLeft"});document.dispatchEvent(e)},e.appendChild(o);const r=document.createElement("button");r.innerText="Up",r.style="color:white;background-color:#2222;margin-left:1rem;",r.onclick=()=>{let e=new KeyboardEvent("keydown",{key:"ArrowUp"});document.dispatchEvent(e)},e.appendChild(r);const c=document.createElement("button");c.innerText="Right",c.style="color:white;background-color:#2222;margin-left:1rem;",c.onclick=()=>{let e=new KeyboardEvent("keydown",{key:"ArrowRight"});document.dispatchEvent(e)},e.appendChild(c);const s=document.createElement("button");s.innerText="Back",s.style="color:white;background-color:#2222;margin-left:1rem;",s.onclick=()=>{let e=new KeyboardEvent("keydown",{key:"ArrowDown"});document.dispatchEvent(e)},e.appendChild(s);const u=document.createElement("button");u.innerText="Rock",u.style="color:white;background-color:#2222;margin-left:1rem;",u.onclick=()=>{let e=new KeyboardEvent("keydown",{key:"a"});document.dispatchEvent(e)},e.appendChild(u);const d=document.createElement("button");d.innerText="Paper",d.style="color:white;background-color:#2222;margin-left:1rem;",d.onclick=()=>{let e=new KeyboardEvent("keydown",{key:"s"});document.dispatchEvent(e)},e.appendChild(d);const l=document.createElement("button");l.innerText="Scissors",l.style="color:white;background-color:#2222;margin-left:1rem;",l.onclick=()=>{let e=new KeyboardEvent("keydown",{key:"d"});document.dispatchEvent(e)},e.appendChild(l);const f=document.createElement("button");f.innerText="Full Screen",f.style="color:white;background-color:#2222;margin-left:1rem;";f.onclick=()=>{V?(R.style.width="",R.style.height="",V=!1):(R.style.width="100%",R.style.height="calc(100% - 30px)",V=!0)},e.appendChild(f)}function O(e,t){const o=document.getElementById(e);!function(e){if(e)document.documentElement.style.setProperty("--intensity",255);else{let e=getComputedStyle(document.documentElement).getPropertyValue("--intensity").trim(),t=Math.max(parseInt(e)-30,135);document.documentElement.style.setProperty("--intensity",t)}}(o.hidden),o.removeAttribute("hidden"),o.innerText=t,q&&(z!==o&&z.setAttribute("hidden",!0),clearTimeout(q)),q=setTimeout((()=>{o.setAttribute("hidden",!0)}),3e3),z=o,G()}function X(){const e=new(window.AudioContext||window.webkitAudioContext),t=[{frequency:440,duration:1,position:{x:1,y:0,z:0}},{frequency:494,duration:.5,position:{x:-1,y:0,z:0}},{frequency:523,duration:.25,position:{x:0,y:0,z:1}},{frequency:392,duration:.25,position:{x:0,y:0,z:-1}},{frequency:659,duration:.5,position:{x:1,y:0,z:1}},{frequency:698,duration:.25,position:{x:-1,y:0,z:1}},{frequency:330,duration:.25,position:{x:1,y:0,z:-1}},{frequency:349,duration:1,position:{x:0,y:1,z:0}},{frequency:311,duration:.5,position:{x:0,y:-1,z:0}},{frequency:587,duration:.25,position:{x:1,y:1,z:0}},{frequency:261,duration:.25,position:{x:-1,y:-1,z:0}},{frequency:349,duration:.5,position:{x:0,y:1,z:1}},{frequency:440,duration:.25,position:{x:0,y:-1,z:1}},{frequency:493,duration:.25,position:{x:1,y:-1,z:0}},{frequency:523,duration:1,position:{x:-1,y:1,z:0}},{frequency:294,duration:.25,position:{x:1,y:0,z:-1}},{frequency:329,duration:.25,position:{x:-1,y:0,z:-1}},{frequency:370,duration:.5,position:{x:0,y:0,z:2}},{frequency:415,duration:.25,position:{x:0,y:0,z:-2}},{frequency:466,duration:.25,position:{x:1,y:1,z:1}},{frequency:523,duration:.5,position:{x:-1,y:1,z:-1}},{frequency:587,duration:.25,position:{x:1,y:-1,z:1}},{frequency:659,duration:.25,position:{x:-1,y:-1,z:1}},{frequency:698,duration:1,position:{x:1,y:0,z:2}}];let o=0;for(let n=0;n<t.length;n++){const r=t[n];W(e,r.frequency,r.duration,r.position,o),o+=r.duration}n&&setTimeout(X,1e3*o)}function W(e,t,o,r,i){if(!n)return;const a=e.createOscillator();a.type="sine",a.frequency.setValueAtTime(t,e.currentTime+i);const c=e.createGain();c.gain.setValueAtTime(.05,e.currentTime+i);const s=new PannerNode(e,{panningModel:"HRTF",distanceModel:"inverse",positionX:r.x,positionY:r.y,positionZ:r.z,refDistance:1,maxDistance:10,rolloffFactor:2}),u=e.createBiquadFilter();u.type="lowpass",u.frequency.setValueAtTime(1e3,e.currentTime+i),a.connect(c),c.connect(u),u.connect(s),s.connect(e.destination),a.start(e.currentTime+i),a.stop(e.currentTime+i+o)}G(),I(g,S,k,p,F.get(r),B);